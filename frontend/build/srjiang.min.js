/* srjiang 2015-07-14 */
"use strict";var careerApp=angular.module("careerApp",["ngRoute"]);careerApp.controller("RegisterCtrl",["$scope",function(a){}]),careerApp.directive("jobSearcher",function(){return{restrict:"E",transclude:!0,scope:{},controller:function(a){},template:'<div class="job-searcher" ng-transclude></div>'}}).directive("jobForm",function(a,b){return{require:"^jobSearcher",restrict:"E",transclude:!0,controller:function(c){var d=function(){$(".job-form").hasClass("job-form-nav")||($(".job-form").addClass("job-form-nav"),$(".job-input").addClass("form-navbar"),$(".job-button").addClass("form-navbar")),$(".job-form .form-group").hasClass("form-group-nav")||$(".job-form .form-group").addClass("form-group-nav"),$(".search-control .logo").hide(),$(".search-control").addClass("search-control-nav")};c.$watch("jobKd",function(e,f){c.jobKd&&""!=c.jobKd&&(console.log(c.jobKd),d(),a.jobKd=c.jobKd,b(c.jobKd,0,10,function(b){a.rows=b,console.log(a.rows)}))}),$("#jobKd").autocomplete({serviceUrl:"http://120.26.209.92:8888/jobsolr/suggest",paramName:"suggest.q",dataType:"jsonp",ajaxSettings:{jsonpCallback:"jsonCallback",success:function(a){console.log("return ok")}},onSelect:function(a){console.log("You selected: "+a.value+", "+a.data)}}),$("#jobKd").bind("keypress",d)},templateUrl:"application/views/jobForm.html"}}).directive("pageResult",function(a,b,c){return{restrict:"E",transclude:!0,link:function(d,e,f){console.log(a.rows),a.curpage=1,a.perpage=10,d.nextPage=function(){a.curpage+=1},d.prevPage=function(){a.curpage-=1},d.gotoOrigin=function(a){c.open(a,"_blank")},a.$watch("curpage",function(c,d){if(a.jobKd&&""!=a.jobKd){console.log(a.jobKd);var e=(a.curpage-1)*a.perpage;b(a.jobKd,e,10,function(b){a.rows=b,console.log(a.rows)})}})},templateUrl:"application/views/pageResult.html"}}),careerApp.factory("jobselect",["$http",function(a){return function(b,c,d,e){console.log("select for "+b),a.jsonp("http://120.26.209.92:8888/jobsolr/select?callback=JSON_CALLBACK&q="+b+"&start="+c+"&rows="+d).success(function(a,b,c,d){e(a)}).error(function(a,b,c,d){e(a)})}}]),careerApp.config(["$routeProvider",function(a){a.when("/index",{templateUrl:"application/views/index.html",controller:"IndexCtrl"}).when("/search",{templateUrl:"/search",controller:"SearchCtrl"}).when("/register",{templateUrl:"application/views/register.html",controller:"RegisterCtrl"}).otherwise({redirectTo:"/index"})}]),careerApp.controller("IndexCtrl",["$scope",function(a){}]);